<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hello! LinkUp — Demo + Guided Tour (stable)</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>

<style>
  :root{
    --ink:#EAEAF6; --muted:#A9AFD9;
    --panel:rgba(29,22,52,.85); --panel-2:rgba(25,19,45,.9);
    --line:rgba(140,106,240,.35);
    --accent:#A78BFA; --accent-2:#8B5CF6; --teal:#22D3EE;
    --success: #22c55e; --warning: #f59e0b; --danger: #ef4444;
  }
  html,body{height:100%}
  body{
    font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    color:var(--ink);
    background:
      radial-gradient(1200px 600px at 20% -10%, rgba(124,58,237,.25), transparent 60%),
      radial-gradient(1200px 600px at 120% 0%, rgba(34,211,238,.16), transparent 55%),
      linear-gradient(180deg, #0D0B17, #0E0B1A 40%, #0C0A16 100%);
  }
  .glass{background:var(--panel); border:1px solid var(--line);
    box-shadow:0 20px 60px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.05);
    backdrop-filter: blur(8px); transition: border-color .3s ease;}
  .chip{border:1px solid rgba(255,255,255,.16); background:rgba(255,255,255,.06)}
  .chip.sel{background:linear-gradient(180deg,var(--accent),var(--accent-2)); color:#170E2F; border-color:transparent; font-weight:800}
  .btn-primary{background:linear-gradient(180deg,var(--accent),var(--accent-2)); color:#170E2F; font-weight:800}
  .btn{border:1px solid rgba(255,255,255,.16); background:rgba(255,255,255,.06)}
  .tag{font-size:.75rem; padding:.2rem .55rem; border-radius:999px; border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.06)}
  .pill{padding:.35rem .7rem; border-radius:999px}
  .small{color:var(--muted);font-size:.85rem}
  .card-title{color:#C7B7FF;font-weight:800;letter-spacing:.2px}
  .avatar{width:52px;height:52px;border-radius:999px;object-fit:cover;border:2px solid rgba(255,255,255,.14)}
  .dot{width:10px;height:10px;border-radius:999px;background:rgba(167,139,250,.55);display:inline-block;margin-right:.5rem}
  .dot.active{background:linear-gradient(180deg,var(--teal),var(--accent))}

  /* Dynamic Border States */
  .border-success { border-color: var(--success); }
  .border-warning { border-color: var(--warning); }
  .border-danger { border-color: var(--danger); }

  /* Score */
  .score-wrap{display:flex;align-items:center;gap:.5rem}
  .score-track{width:130px;height:8px;border-radius:999px;background:rgba(255,255,255,.08);position:relative;overflow:hidden}
  .score-fill{position:absolute;left:0;top:0;height:100%;border-radius:999px;background:linear-gradient(90deg,#EF4444,#F59E0B,#22C55E);width:0%; transition: width .3s ease-out;}

  /* Phases + single continuous bar (grid-aligned) */
  .phase-wrap{display:grid;grid-template-columns:repeat(4,1fr);column-gap:12px;row-gap:10px;align-items:center}
  .phase-label{display:flex;align-items:center;gap:.4rem;min-height:26px}
  .phase-track{grid-column:1/-1;position:relative;height:8px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);overflow:hidden}
  .phase-fill{position:absolute;left:0;top:0;height:100%;border-radius:999px;background:linear-gradient(90deg,var(--teal),var(--accent));width:0%; transition: width .3s ease-out;}
  .phase-tick{position:absolute;top:-6px;width:1px;height:20px;background:rgba(255,255,255,.12)}
  .phase-tick.t25{left:25%} .phase-tick.t50{left:50%} .phase-tick.t75{left:75%}

  /* Guided tour */
  .tour-launch{position:fixed;right:14px;top:14px;z-index:60;display:flex;gap:8px}
  .tour-launch button{border:1px solid rgba(167,139,250,.35);background:rgba(167,139,250,.12);
    color:#e9e9ff;border-radius:999px;padding:6px 10px;font-weight:700;box-shadow:0 6px 18px rgba(0,0,0,.35);cursor:pointer}
  .tour-launch button:hover{background:rgba(167,139,250,.22)}

  .tour-overlay{position:fixed;inset:0;z-index:50;pointer-events:none;display:none}
  .tour-overlay[data-open="1"]{display:block; pointer-events:auto} /* clicks only when open */
  .tour-dim{position:absolute;inset:0;background:rgba(5,6,16,.66);backdrop-filter:saturate(120%) blur(2px); pointer-events:auto}
  .tour-svg{position:absolute;inset:0;pointer-events:none}
  .tour-spot{position:absolute;border-radius:14px;box-shadow:0 0 0 2px rgba(139,92,246,.55), 0 0 0 10px rgba(139,92,246,.18), 0 12px 28px rgba(0,0,0,.55);pointer-events:none;transition:all .18s ease}
  .tour-bubble{position:absolute;min-width:280px;max-width:420px;color:#e9e9ff;
    background:linear-gradient(180deg,rgba(32,24,58,.96),rgba(25,18,48,.96));
    border:1px solid rgba(167,139,250,.28);border-radius:14px;padding:14px 14px 12px 14px;
    box-shadow:0 16px 48px rgba(0,0,0,.6), inset 0 0 0 1px rgba(167,139,250,.14);
    opacity:0;transform:translateY(8px);transition:opacity .22s ease, transform .22s ease;
    pointer-events:auto}
  .tour-bubble[data-show="1"]{opacity:1;transform:translateY(0)}
  .tour-title{font-weight:800;letter-spacing:.2px;color:#c7b7ff;margin:0 0 6px 0}
  .tour-body{font-size:.95rem;color:#cad0ff;line-height:1.45}
  .tour-ctr{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
  .tour-btn{border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);color:#eaeaf6;
    padding:8px 12px;border-radius:10px;cursor:pointer;pointer-events:auto}
  .tour-btn.primary{background:linear-gradient(180deg,#a78bfa,#8b5cf6);color:#170e2f;border-color:transparent;font-weight:800}
  .tour-step{font-size:.78rem;color:#9aa0d6;margin-top:6px}
  .tour-arrow{stroke:url(#tourGrad);stroke-width:2.2}
  .tour-arrow-head{fill:#a78bfa}
</style>
</head>
<body>

<div class="tour-launch">
  <button id="tour-owner-btn">Owner tour</button>
  <button id="tour-viewer-btn">Viewer tour</button>
</div>

<div class="max-w-6xl mx-auto px-5 pt-8 pb-16">

  <div class="glass rounded-2xl p-4 md:p-5 mb-6 relative overflow-hidden">
    <div class="absolute inset-0 pointer-events-none" style="background: radial-gradient(1200px 200px at -10% 0%, rgba(167,139,250,.12), transparent 60%);"></div>

    <div class="flex flex-wrap items-center gap-3">
      <div class="text-2xl font-extrabold tracking-tight">Hello! <span class="text-violet-300">LinkUp</span> <span class="text-sm font-semibold text-violet-200/80 align-top">v7</span></div>

      <div id="scenarioSelect" class="chip rounded-xl px-3 py-1.5 ml-2 flex items-center gap-2">
        <span class="text-sm">Scenario:</span>
        <select id="scenarioPicker" class="bg-transparent outline-none text-[.9rem]">
          <option value="C-available"> C • Fresh new (Owner available)</option>
          <option value="D-away"> D • Fresh new (Owner away)</option>
          <option value="B-followup"> B • Follow-up needed</option>
          <option value="A-accepted"> A • Accepted → Scheduling</option>
        </select>
      </div>

      <div id="availabilityToggle" class="ml-auto flex items-center gap-2">
        <span class="small">Owner availability:</span>
        <button data-state="available" class="chip pill px-3 py-1 sel" type="button">Available</button>
        <button data-state="away" class="chip pill px-3 py-1" type="button">Away</button>
      </div>

      <div id="viewToggle" class="flex items-center gap-1 ml-3">
        <span class="small">View as:</span>
        <button id="btn-viewer" class="chip pill px-3 py-1" type="button">Viewer</button>
        <button id="btn-owner" class="chip pill px-3 py-1 sel" type="button">Owner</button>
      </div>
    </div>

    <div id="scenarioHint" class="mt-3 small">Scenario: <span class="hint">Fresh new</span> • <span id="availLabel" class="hint">Owner available</span></div>
  </div>

  <div id="profilesRow" class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-6">
    <div class="glass rounded-2xl p-4 flex items-center gap-4">
      <img class="avatar" src="https://images.unsplash.com/photo-1580489944761-15a19d654956?q=80&w=256&auto-format&fit=crop" alt="Owner">
      <div>
        <div class="font-semibold text-lg">Alex Winterton</div>
        <div class="small">Signature Owner</div>
      </div>
      <span id="ownerBusyBadge" class="tag ml-auto hidden">Away</span>
    </div>
    <div class="glass rounded-2xl p-4 flex items-center gap-4">
      <img class="avatar" src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=256&auto=format&fit=crop" alt="Viewer">
      <div>
        <div class="font-semibold text-lg">Jordan Lee</div>
        <div class="small">Signature Viewer</div>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

    <div class="space-y-6">

      <div id="viewerRequest" class="glass rounded-2xl p-4">
        <div class="card-title text-sm mb-2">Viewer Request &amp; 1-Liner</div>
        <div class="flex items-center gap-3 mb-2">
          <span id="actionPill" class="pill chip px-3 py-1 text-sm">Action selected: Schedule a Call</span>
        </div>
        <div class="small opacity-90">“<span id="oneLiner">Travel app MVP — need fast UI polish + design tokens</span>”</div>
      </div>

      <div id="compatibilityCard" class="glass rounded-2xl p-4">
        <div class="flex items-start justify-between">
          <div>
            <div class="card-title text-sm mb-1">Compatibility</div>
            <div class="small">Confidence: <span id="confText">High</span></div>
          </div>
          <div id="compatScoreWrap" class="text-right">
            <div class="small mb-1">Score</div>
            <div class="score-wrap">
              <div class="score-track"><div id="scoreFill" class="score-fill"></div></div>
              <div class="text-xl font-extrabold"><span id="scoreNum">78</span><span class="text-sm opacity-70">/100</span></div>
            </div>
          </div>
        </div>
        <ul class="mt-3 space-y-2 text-[.95rem]">
          <li>• Mobile UX focus match</li>
          <li>• 6 miles apart</li>
          <li>• Clear project intent</li>
        </ul>
      </div>

    </div>

    <div class="space-y-6">

      <div id="nextStepCardOwner" class="glass rounded-2xl p-4">
        <div class="card-title text-sm mb-2">Next step</div>
        <div class="space-y-3">
          <button class="btn-primary w-full rounded-xl py-3" id="acceptSendLinkBtn" type="button">Accept &amp; Send Link</button>
          <button class="btn w-full rounded-xl py-3" id="needsInfoBtn"      type="button">Needs Info</button>
          <button class="btn w-full rounded-xl py-3" id="declineBtn"        type="button">Not a Fit</button>
        </div>
        <div class="small mt-3">Choose one action to keep this LinkUp fresh.</div>
      </div>
      
      <div id="viewerCard" class="glass rounded-2xl p-4">
        <div class="card-title text-sm mb-2" id="viewerCardTitle">What happens next</div>
        <p class="small" id="viewerCardText">Owner chooses an action. You’ll get the link or message here.</p>
        <div id="viewerOwnerStatus" class="mt-3 font-bold"></div>
      </div>

    </div>
  </div>

  <div id="progressSection" class="glass rounded-2xl p-4 mt-6">
    <div class="phase-wrap">
      <div class="phase-label"><span class="dot active" id="dot-submitted"></span>Submitted</div>
      <div class="phase-label"><span class="dot" id="dot-viewed"></span>Owner viewed</div>
      <div class="phase-label"><span class="dot" id="dot-acted"></span>Owner acted</div>
      <div class="phase-label"><span class="dot" id="dot-closed"></span>Scheduled/Closed</div>

      <div class="phase-track">
        <div class="phase-fill" id="progressBar"></div>
        <div class="phase-tick t25"></div>
        <div class="phase-tick t50"></div>
        <div class="phase-tick t75"></div>
      </div>
    </div>
    <div id="expiry" class="small mt-2">Expires in 6d 23h 43m</div>
  </div>

  <div id="footerActions" class="flex flex-wrap gap-3 mt-6">
    <button class="btn rounded-xl px-4 py-2" type="button">Download vCard</button>
    <button class="btn rounded-xl px-4 py-2" type="button">Add to Calendar</button>
    <a class="btn rounded-xl px-4 py-2" href="#" onclick="alert('Opening public LinkUp page…');return false;">Open public LinkUp page</a>
    <div class="small opacity-70 ml-auto">ID: —</div>
  </div>

</div>

<div id="confirmModal" class="fixed inset-0 hidden items-center justify-center z-40">
  <div class="absolute inset-0 bg-black/70 backdrop-blur-sm" id="confirmBackdrop"></div>
  <div class="glass rounded-2xl p-5 w-[min(520px,92vw)] relative">
    <button class="absolute right-3 top-3 chip rounded-lg px-2 py-1" id="confirmClose" type="button">✕</button>
    <div class="card-title mb-1">Confirm action</div>
    <div id="confirmText" class="small mb-4"></div>
    <div class="flex gap-3 justify-end">
      <button class="btn rounded-xl px-4 py-2" id="confirmBack" type="button">Back</button>
      <button class="btn-primary rounded-xl px-4 py-2" id="confirmApply" type="button">Confirm</button>
    </div>
  </div>
</div>

<div id="tour-overlay" class="tour-overlay" aria-hidden="true">
  <div class="tour-dim" id="tour-dim"></div>
  <svg class="tour-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
    <defs>
      <linearGradient id="tourGrad" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" stop-color="#22d3ee" stop-opacity=".85"/>
        <stop offset="100%" stop-color="#a78bfa" stop-opacity=".95"/>
      </linearGradient>
      <marker id="tourHead" markerWidth="8" markerHeight="8" refX="6" refY="3.5" orient="auto">
        <polygon class="tour-arrow-head" points="0 0, 7 3.5, 0 7"></polygon>
      </marker>
    </defs>
    <line id="tour-line" class="tour-arrow" x1="0" y1="0" x2="0" y2="0" marker-end="url(#tourHead)"></line>
  </svg>
  <div id="tour-spot" class="tour-spot"></div>
  <div id="tour-bubble" class="tour-bubble" role="dialog" aria-live="polite">
    <h4 id="tour-title" class="tour-title"></h4>
    <div id="tour-body" class="tour-body"></div>
    <div class="tour-step" id="tour-step-indicator"></div>
    <div class="tour-ctr">
      <button id="tour-prev" class="tour-btn" type="button">Back</button>
      <button id="tour-skip" class="tour-btn" type="button">Skip</button>
      <button id="tour-next" class="tour-btn primary" type="button">Next</button>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {

  // ---------- DOM Element Selectors ----------
  const $ = (selector, root = document) => root.querySelector(selector);
  
  // ---------- DOM Element References ----------
  const ownerBtn = $('#btn-owner');
  const viewerBtn = $('#btn-viewer');
  const nextStepCardOwner = $('#nextStepCardOwner');
  const viewerCard = $('#viewerCard');
  const viewerCardTitle = $('#viewerCardTitle');
  const viewerCardText = $('#viewerCardText');
  const progressBar = $('#progressBar');
  const acceptBtn = $('#acceptSendLinkBtn');
  const needsInfoBtn = $('#needsInfoBtn');
  const declineBtn = $('#declineBtn');
  const scoreFill = $('#scoreFill');
  const scoreNum = $('#scoreNum');

  // ---------- State Management ----------
  let state = {
    view: 'owner', // 'owner' or 'viewer'
    ownerAction: null // null, 'accept', 'needs', or 'decline'
  };

  // ---------- UI Update Functions ----------

  /**
   * Updates the viewer's "What's Next" card content and border color.
   */
  function updateViewerCard(title, text, mode) {
    viewerCard.classList.remove('border-success', 'border-warning', 'border-danger');
    if (mode) {
      viewerCard.classList.add(`border-${mode}`);
    }
    viewerCardTitle.textContent = title;
    viewerCardText.textContent = text;
  }

  /**
   * Updates the progress bar's width.
   */
  function updateProgressBar(percentage) {
    progressBar.style.width = `${percentage}%`;
  }
  
  /**
   * Updates the visual state of the Owner's action buttons.
   */
  function updateActionButtons() {
    // Reset all buttons to the default state first
    acceptBtn.classList.remove('btn-primary');
    acceptBtn.classList.add('btn');
    needsInfoBtn.classList.remove('btn-primary');
    needsInfoBtn.classList.add('btn');
    declineBtn.classList.remove('btn-primary');
    declineBtn.classList.add('btn');

    // Apply the 'btn-primary' class to the selected button
    let selectedBtn;
    switch (state.ownerAction) {
      case 'accept':
        selectedBtn = acceptBtn;
        break;
      case 'needs':
        selectedBtn = needsInfoBtn;
        break;
      case 'decline':
        selectedBtn = declineBtn;
        break;
      default:
        // If no action is set, default to the 'Accept' button as primary
        selectedBtn = acceptBtn;
        break;
    }
    selectedBtn.classList.remove('btn');
    selectedBtn.classList.add('btn-primary');
  }

  /**
   * Renders the entire UI based on the current state.
   */
  function render() {
    // 1. Toggle visibility based on the current view (Owner vs. Viewer)
    const isOwnerView = state.view === 'owner';
    nextStepCardOwner.style.display = isOwnerView ? 'block' : 'none';
    viewerCard.style.display = isOwnerView ? 'none' : 'block';
    ownerBtn.classList.toggle('sel', isOwnerView);
    viewerBtn.classList.toggle('sel', !isOwnerView);

    // 2. Update the highlighting of the owner action buttons
    updateActionButtons();

    // 3. Update Viewer Card and Progress Bar based on Owner's action
    switch (state.ownerAction) {
      case 'accept':
        updateViewerCard('Accepted!', 'Great news! The Owner has accepted and will send a scheduling link shortly.', 'success');
        updateProgressBar(100);
        $('#dot-acted').classList.add('active');
        $('#dot-closed').classList.add('active');
        break;
      case 'needs':
        updateViewerCard('Information Needed', 'The Owner needs a bit more information. They will reach out with specific questions.', 'warning');
        updateProgressBar(66);
        $('#dot-acted').classList.add('active');
        break;
      case 'decline':
        updateViewerCard('Not a Fit', 'Thanks for connecting. Sorry it's not a good fit at this time, but perharps we can link at some other point or time.', 'danger');
        updateProgressBar(66);
        $('#dot-acted').classList.add('active');
        break;
      default:
        // Initial state
        updateViewerCard('What happens next', 'Owner chooses an action. You’ll get the link or message here.');
        updateProgressBar(33); // Default to "Submitted"
        break;
    }
    
    // 4. Update Compatibility Score Bar
    scoreFill.style.width = scoreNum.textContent + '%';

    // Always ensure the "viewed" dot is active if any action has been taken or is pending.
    if(state.ownerAction) {
        $('#dot-viewed').classList.add('active');
    }
  }

  // ---------- Event Listeners ----------

  // View toggling
  ownerBtn.addEventListener('click', () => {
    state.view = 'owner';
    render();
  });

  viewerBtn.addEventListener('click', () => {
    state.view = 'viewer';
    render();
  });

  // Owner action buttons
  acceptBtn.addEventListener('click', () => {
    state.ownerAction = 'accept';
    render();
  });

  needsInfoBtn.addEventListener('click', () => {
    state.ownerAction = 'needs';
    render();
  });

  declineBtn.addEventListener('click', () => {
    state.ownerAction = 'decline';
    render();
  });

  // ---------- Initial Render ----------
  $('#dot-viewed').classList.add('active');
  render();
});
</script>
</body>
</html>
